DROP DATABASE IF EXISTS `BUS_ONLINE`;
CREATE DATABASE `BUS_ONLINE`;
USE`BUS_ONLINE`;

SET NAMES utf8;
SET character_set_client = utf8mb4;

CREATE TABLE TUYENXE(
 MA_TX INT(20) NOT NULL,
 TEN_TX VARCHAR(255) NOT NULL,
 GIOKHOIHANH DATETIME NOT NULL,
 PRIMARY KEY (`MA_TX`)

) ENGINE=InnoDB  DEFAULT CHARSET= utf8mb4 COLLATE= utf8mb4_0900_ai_ci;	

INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('101', 'TUYẾN HCM- CẦN THƠ',STR_TO_DATE('23/12/2023 12:06:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('102', 'TUYẾN HCM- CẦN THƠ',STR_TO_DATE('23/12/2023 16:35:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('103', 'TUYẾN HCM- CẦN THƠ',STR_TO_DATE('23/12/2023 22:20:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('104', 'TUYẾN HCM-  Bà Rịa Vũng Tàu',STR_TO_DATE('24/12/2023 04:30:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('101', 'TUYẾN HCM-  Bà Rịa Vũng Tàu',STR_TO_DATE('24/12/2023 17:53:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('101', 'TUYẾN HCM-  Bà Rịa Vũng Tàu',STR_TO_DATE('24/12/2023 12:20:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('101', 'TUYẾN  Bà Rịa Vũng Tàu- CẦN THƠ',STR_TO_DATE('23/12/2023 12:06:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('101', 'TUYẾN  Bà Rịa Vũng Tàu- CẦN THƠ',STR_TO_DATE('23/12/2023 16:56:00','%d/%m/%Y %H:%i:%s'));
INSERT INTO `TUYENXE`(MA_TX, TEN_TX, GIOKHOIHANH) VALUES ('101', 'TUYẾN  Bà Rịa Vũng Tàu- CẦN THƠ',STR_TO_DATE('24/12/2023 14:26:00','%d/%m/%Y %H:%i:%s'));

CREATE TABLE XE (
BIENSOXE VARCHAR(255),
LOAIXE VARCHAR(255),
TENTAIXE VARCHAR(255),
PRIMARY KEY (` BIENSOXE `),
FOREIGN KEY (MA_TX) REFERENCES TUYENXE(MA_TX)

) ENGINE=InnoDB  DEFAULT CHARSET= utf8mb4 COLLATE= utf8mb4_0900_ai_ci;	
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59B1 355.65 ', 'xe 16 chỗ','Trương Văn An','202');
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59B3 681.81 ', 'xe 32 chỗ','Giang Mạnh Dũng','203');
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59H5 562.67 ', 'xe 32 chỗ','Đỗ Trí Hào','103');
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59B6 37.804 ', 'xe 32 chỗ','Phạm Thiên Hưng','201');
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59C4 230.76 ', 'xe giường nằm','Đặng Ðình Nam','303');
INSERT INTO `XE` (BIENSOXE, LOAIXE, TENTAIXE, MA_TX)VALUES ('59B3 596.19 ', 'xe 32 chỗ','Trầm Hữu Chiến','301');
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59D2 65.228 ', 'xe giường nằm','Cao Việt Chính','101');
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59F1 712.87 ', 'xe 32 chỗ','Nguyễn Việt Hồng','102');
INSERT INTO `XE`(BIENSOXE, LOAIXE, TENTAIXE, MA_TX) VALUES ('59B4 965.60 ', 'xe giường nằm','Hà Việt Duy','302');
INSERT INTO `XE` (BIENSOXE, LOAIXE, TENTAIXE, MA_TX)VALUES ('59B4 137.04 ', 'xe 16 chỗ','Trương Văn An','202');
INSERT INTO `XE` (BIENSOXE, LOAIXE, TENTAIXE, MA_TX)VALUES ('59B3 681.81 ', 'xe 32 chỗ','Phạm Thiên Hưng','203');
INSERT INTO `XE` (BIENSOXE, LOAIXE, TENTAIXE, MA_TX)VALUES ('59B3 681.81 ', 'xe 32 chỗ','Trầm Hữu Chiến','201');
INSERT INTO `XE` (BIENSOXE, LOAIXE, TENTAIXE, MA_TX)VALUES ('59B3 681.81 ', 'xe 32 chỗ','Ngô Mạnh Nghiêm','103');



CREATE TABLE NHANVIEN(
MANV VARCHAR(255) NOT NULL,
TENNV VARCHAR(255)NOT NULL,
SDTNV INT (11) NOT NULL,
PRIMARY KEY (`MANV`)
)  ENGINE=InnoDB  DEFAULT CHARSET= utf8mb4 COLLATE= utf8mb4_0900_ai_ci;	
INSERT INTO `NHANVIEN`(MANV ,TENNV,SDTNV) VALUES('NV01','Lý Gia Bình','0983063836');
INSERT INTO `NHANVIEN`(MANV ,TENNV,SDTNV) VALUES('NV02','Đỗ Thanh Hà','0965034975');
INSERT INTO `NHANVIEN` (MANV ,TENNV,SDTNV)VALUES('NV03','Lý Gia Bình','0354269813');
INSERT INTO `NHANVIEN` (MANV ,TENNV,SDTNV)VALUES('NV04','Trang Ðức Ân','0937052636');
INSERT INTO `NHANVIEN` (MANV ,TENNV,SDTNV)VALUES('NV05','Dương Diễm Phúc','0166765426');
INSERT INTO `NHANVIEN`(MANV ,TENNV,SDTNV) VALUES('NV06','Phùng Hồng Hạnh','0254114653');
INSERT INTO `NHANVIEN` (MANV ,TENNV,SDTNV)VALUES('NV07','NGuyễn Trúc Linh','0166030354');
INSERT INTO `NHANVIEN`(MANV ,TENNV,SDTNV) VALUES('NV08','Huỳnh Khánh Vy','0253286624');

CREATE TABLE KHACHHANG(
MAKH VARCHAR(255) NOT NULL,
TENKH VARCHAR(255) NOT NULL,
DIACHI VARCHAR(255) NOT NULL,
SDTKH INT(20) NOT NULL,
email VARCHAR(255) NOT NULL,
username VARCHAR(50) NOT NULL,
password VARCHAR(255) NOT NULL,
PRIMARY KEY (`MAKH`)
)  ENGINE=InnoDB  DEFAULT CHARSET= utf8mb4 COLLATE= utf8mb4_0900_ai_ci;	
INSERT INTO `KHACHHANG` (MAKH,TENKH,DIACHI,SDTKH,email,username) VALUES ( 'KH-A10001', 'KHÁCH HÀNG A ', '123 TRẦN PHÚ PHƯỜNG B XÃ D','0166835480', 'AaaaaaAaaaa@gmail.com ','AaaaaaAaa','dimmmmmm09');



CREATE TABLE DONDATXE(
MAHD VARCHAR(255) NOT NULL,
LOAIXE VARCHAR(255) NOT NULL,
TEN_TX VARCHAR(255) NOT NULL,
BIENSOXE VARCHAR(255) NOT NULL,
GIOKHOIHANH DATETIME NOT NULL,
MA_TX INT (20) NOT NULL,
PRIMARY KEY (`MADH` ),
FOREIGN KEY (TEN_TX) REFERENCES TUYENXE(TEN_TX),
FOREIGN KEY (GIOKHOIHANH) REFERENCES TUYENXE(GIOKHOIHANH),
FOREIGN KEY (MA_TX) REFERENCES TUYENXE(MA_TX),
FOREIGN KEY (BIENSOXE) REFERENCES XE(BIENSOXE),
FOREIGN KEY (LOAIXE) REFERENCES XE(LOAIXE)
) ENGINE=InnoDB DEFAULT CHARSET= utf8mb4 COLLATE= utf8mb4_0900_ai_ci;
INSERT INTO `DONDATXE` (MADH, LOAIXE,TEN_TX,BIENSOXE,GIOKHOIHANH, MA_TX) VALUES ( 'H_C 128526121','XE GIƯỜNG NẰM', 'TUYẾN HỒ CHÍ MINH -CẦN THƠ','59B4 965.60',STR_TO_DATE('23/12/2023 12:06:00','%d/%m/%Y %H:%i:%s'),'102')

